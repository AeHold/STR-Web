{% extends 'bookshopapp/base.html' %}
{% block title %}Array{% endblock %}
{% block content %}

<div>
    <form class="filterWrapper" id="form">
        Name: <input type="text" maxlength="20" id="name">
        <br>
        Mid name: <input type="text" maxlength="20" id="mname">
        <br>
        Last name: <input type="text" maxlength="20" id="lname">
        <br>
        Flight #: <input type="text" id="flight">
    </form>
    <button onclick="addUser();">Add user</button>
    <button onclick="task();">Find same last name</button>
    <ul id="list">

    </ul>
</div>
{% endblock %}
{%block script%}
<script>
    var users = []

    function addUser(){
        let name = document.getElementById('name')
        let mname = document.getElementById('mname')
        let lname = document.getElementById('lname')
        let flight = document.getElementById('flight')

        if(name.value==""||mname.value==""||lname.value==""||flight.value=="")
        {
            alert('Enter all values');
            return;
        }

        if(users[flight.value+" "+lname.value]){
            users[flight.value+" "+lname.value].push([lname.value])
        }
        else{
            users[flight.value+" "+lname.value]=[[lname.value]]
        }

        document.getElementById('list').innerHTML=document.getElementById('list').innerHTML+'<li>'+name.value+" "+mname.value+" "+lname.value+";"+flight.value+"</li>";

    }

    function task(){
        console.log(1)
        keys = Object.keys(users)
        list = document.getElementById('list')
        list.innerHTML = ""

        for(var i = 0; i<keys.length;i++){
            if(users[keys[i]].length>1){
                list.innerHTML=list.innerHTML+'<li>'+keys[i]+'</li>';
            }
        }
    }
</script>
{%endblock%}
